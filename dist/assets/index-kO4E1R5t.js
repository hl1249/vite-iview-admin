import{u as V,a as x,r as u,b as n,o as y,c as I,d,e as o,w as s,f as k,g as F,C as f,h as b}from"./index-gVg0D9WM.js";import{l as B}from"./user-Zwj6uD-y.js";const E={class:"login"},M={class:"login-con"},U={class:"form-con"},O=d("p",{class:"login-tip"},"输入任意用户名和密码即可",-1),K={__name:"index",setup(S){const g=V(),{userModule:i,menuModule:v}=x(),h=u({userName:[{required:!0,message:"请输入正确格式的账号",trigger:"blur"}],password:[{required:!0,message:"请输入正确格式的密码",trigger:"blur"}]}),a=u({userName:"super_admin",password:"123456"}),m=u(0),p=c=>{c.validate(t=>{t&&B(a).then(e=>{console.log(e),console.log("expires_time - this.$Cache.time()",e.data.expires_time-f.time()),i.LOGIN({token:e.data.token,time:e.data.expires_time-f.time()}),i.UPDATE_USERINFO(e.data),e.status==200&&g.push({name:v.active_name||b.HOME_NAME})}).catch(e=>{console.log(e)})})};return(c,t)=>{const e=n("Icon"),_=n("Input"),r=n("FormItem"),N=n("Button"),w=n("Form"),C=n("Card");return y(),I("div",E,[d("div",M,[o(C,{icon:"log-in",title:"欢迎登录",bordered:!1},{default:s(()=>[d("div",U,[o(w,{ref_key:"loginForm",ref:m,model:a.value,rules:h.value,onKeydown:k(p,["enter","native"])},{default:s(()=>[o(r,{prop:"userName"},{default:s(()=>[o(_,{modelValue:a.value.userName,"onUpdate:modelValue":t[0]||(t[0]=l=>a.value.userName=l),placeholder:"请输入用户名"},{prepend:s(()=>[o(e,{type:"ios-person-outline"})]),_:1},8,["modelValue"])]),_:1}),o(r,{prop:"password"},{default:s(()=>[o(_,{type:"password",modelValue:a.value.password,"onUpdate:modelValue":t[1]||(t[1]=l=>a.value.password=l),placeholder:"请输入密码"},{prepend:s(()=>[o(e,{type:"ios-lock-outline"})]),_:1},8,["modelValue"])]),_:1}),o(r,null,{default:s(()=>[o(N,{onClick:t[2]||(t[2]=l=>p(m.value)),type:"primary",long:""},{default:s(()=>[F("登录")]),_:1})]),_:1})]),_:1},8,["model","rules"]),O])]),_:1})])])}}};export{K as default};
